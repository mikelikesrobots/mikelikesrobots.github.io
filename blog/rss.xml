<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Mike Likes Robots Blog</title>
        <link>https://mikelikesrobots.github.io/blog</link>
        <description>Mike Likes Robots Blog</description>
        <lastBuildDate>Fri, 12 Jan 2024 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Building a ROS2 node in Rust!]]></title>
            <link>https://mikelikesrobots.github.io/blog/ros2-rust-node</link>
            <guid>https://mikelikesrobots.github.io/blog/ros2-rust-node</guid>
            <pubDate>Fri, 12 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[This post shows how to build a Robot Operating System 2 node using Rust, a systems programming language built for safety, security, and performance. In the post, I'll tell you about Rust - the programming language, not the video game! I'll tell you why I think it's useful in general, then specifically in robotics, and finally show you how to run a ROS2 node written entirely in Rust that will send messages to AWS IoT Core.]]></description>
            <content:encoded><![CDATA[<p>This post shows how to build a Robot Operating System 2 node using Rust, a systems programming language built for safety, security, and performance. In the post, I'll tell you about <a href="https://www.rust-lang.org/" target="_blank" rel="noopener noreferrer">Rust</a> - the programming language, not the video game! I'll tell you why I think it's useful in general, then specifically in robotics, and finally show you how to run a ROS2 node written entirely in Rust that will send messages to AWS IoT Core.</p>
<p>This post is also available in video form - check the video link below if you want to follow along!</p>
<iframe class="youtube-video" src="https://www.youtube.com/embed/U5wHiZpNdvg?si=sOkqQglS_wBYwRLu" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-rust">Why Rust?<a href="https://mikelikesrobots.github.io/blog/ros2-rust-node#why-rust" class="hash-link" aria-label="Direct link to Why Rust?" title="Direct link to Why Rust?">​</a></h2>
<p>The first thing to talk about is, why Rust in particular over other programming languages? Especially given that ROS2 has strong support for C++ and Python, we should think carefully about whether it's worth travelling off the beaten path.</p>
<p>There are much more in-depths articles and videos about the language itself, so I'll keep my description brief. Rust is a systems-level programming language, which is the same langauge as C and C++, but with a very strict compiler that blocks you from doing "unsafe" operations. That means the language is built for high performance, but with a greatly diminished risk of doing something unsafe as C and C++ allow.</p>
<p>Rust is also steadily growing in traction. It is the only language other than C to make its way into the Linux kernel - and the Linux kernel was originally written in C! The Windows kernel is also rewriting some modules in Rust - check here to see what they have to say:</p>
<iframe class="youtube-video" src="https://www.youtube.com/embed/1uAsA1hm52I?si=jX23v8UTqkCFf04z&amp;start=265" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<p>The major tech companies are adopting Rust, including Google, Facebook, and Amazon. This recent 2023 keynote from Dr Wener Vogels, Vice President and CTO of Amazon.com, had some choice words to say about Rust. Take a look here to hear this expert in the industry:</p>
<iframe class="youtube-video" src="https://www.youtube.com/embed/UTRBVPvzt9w?si=QsIxqpnwmpGowx0e&amp;start=3699" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-isnt-rust-used-more">Why isn't Rust used more?<a href="https://mikelikesrobots.github.io/blog/ros2-rust-node#why-isnt-rust-used-more" class="hash-link" aria-label="Direct link to Why isn't Rust used more?" title="Direct link to Why isn't Rust used more?">​</a></h3>
<p>That's a great question. Really, I've presented the best parts in this post so far. Some of the drawbacks include:</p>
<ol>
<li>Being a newer language means less community support and less components provided out of the box. For example, writing a desktop GUI in Rust is possible, but the libraries are still maturing.</li>
<li>It's harder to learn than most languages. The stricter compiler means some normal programming patterns don't work, whcih means relearning some concepts and finding different ways to accomplish the same task.</li>
<li>It's hard for a new language to gain traction! Rust has to prove it will stand the test of time.</li>
</ol>
<p>Having said that, I believe learning the language is worth it for safety, security, and sustainability reasons. Safety and security comes from the strict compiler, and sustainability comes from being a low-level language that does the task faster and with fewer resources.</p>
<p>That's true for robotics as much as it is for general applications. Some robot software can afford to be slow, like high-level message passing and decision making, but a lot of it needs to be real-time and high-performance, like processing Lidar data. My example today is perfectly acceptable in Python because it's passing non-urgent messages, but it is a good use case to explore using Rust in.</p>
<p>With that, let's stop talking about Rust, and start looking at building that ROS2 node.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="building-a-ros2-node">Building a ROS2 Node<a href="https://mikelikesrobots.github.io/blog/ros2-rust-node#building-a-ros2-node" class="hash-link" aria-label="Direct link to Building a ROS2 Node" title="Direct link to Building a ROS2 Node">​</a></h2>
<p>The node we're building replicates the Python-based node from <a href="https://aws.amazon.com/blogs/robotics/how-to-connect-your-robots-to-the-aws-cloud-and-drive-data-driven-innovation/" target="_blank" rel="noopener noreferrer">this blog post</a>. The same setup is required, meaning the setup of X.509 certificates, IoT policies, and so on will be used. If you want to follow along, make sure to run through that setup to the point of running the code - at which point, we can switch over to the Rust-based node. If you prefer to follow instructions from a README, please <a href="https://github.com/mikelikesrobots/aws-iot-node-rust" target="_blank" rel="noopener noreferrer">follow this link</a> - it is the repository containing the source code we'll be using!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="https://mikelikesrobots.github.io/blog/ros2-rust-node#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h3>
<p>The first part of our setup is making sure all of our tools are installed. This node can be built on any operating system, but instructions are given for Ubuntu, so you may need some extra research for other systems.</p>
<p>Execute the following to install Rust using <a href="https://rustup.rs/" target="_blank" rel="noopener noreferrer">Rustup</a>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>There are further dependencies taken from the <a href="https://github.com/ros2-rust/ros2_rust#sounds-great-how-can-i-try-this-out" target="_blank" rel="noopener noreferrer">ROS2 Rust repository</a> as follows:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install -y git libclang-dev python3-pip python3-vcstool # libclang-dev is required by bindgen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Install these plugins for cargo and colcon:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cargo install --debug cargo-ament-build  # --debug is faster to install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pip install git+https://github.com/colcon/colcon-cargo.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pip install git+https://github.com/colcon/colcon-ros-cargo.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="source-code">Source Code<a href="https://mikelikesrobots.github.io/blog/ros2-rust-node#source-code" class="hash-link" aria-label="Direct link to Source Code" title="Direct link to Source Code">​</a></h3>
<p>Assuming your existing ROS2 workspace is at <code>~/ros2_ws</code>, the following commands can be used to check out the source code:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/ros2_ws/src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/mikelikesrobots/aws-iot-node-rust.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/ros2-rust/ros2_rust.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/aws-samples/aws-iot-robot-connectivity-samples-ros2.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ROS2 Rust then uses <code>vcs</code> to import the other repositories it needs:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/ros2_ws</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vcs import src &lt; src/ros2_rust/ros2_rust_humble.repos</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That concludes checking out the source code.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="building-the-workspace">Building the workspace<a href="https://mikelikesrobots.github.io/blog/ros2-rust-node#building-the-workspace" class="hash-link" aria-label="Direct link to Building the workspace" title="Direct link to Building the workspace">​</a></h3>
<p>The workspace can now be built. It takes around 10m to build ROS2 Rust, which should only need to be done once. Following that, changes to the code from this repository can be built very quickly. To build the workspace, execute:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/ros2_ws</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">colcon build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source install/setup.bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The build output should look something like this:</p>
<p><img loading="lazy" alt="Colcon Build Complete" src="https://mikelikesrobots.github.io/assets/images/colcon-build-complete-92fa22d69d0e191e2e53077727bd949b.png" width="1146" height="522" class="img_ev3q"></p>
<p>Once the initial build has completed, the following command can be used for subsequent builds:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">colcon build --packages-select aws_iot_node</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here it is in action:</p>
<p><img loading="lazy" alt="build-only-iot" src="data:image/webp;base64,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" width="716" height="103" class="img_ev3q"></p>
<p>Now, any changes that are made to this repository can be built and tested with <code>cargo</code> commands, such as:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cargo build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cargo run --bin mock-telemetry</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The cargo build log will look something like:</p>
<p><img loading="lazy" alt="cargo-build-complete" src="https://mikelikesrobots.github.io/assets/images/cargo-build-complete-c46e29a50a37bc9390bb1e7b272ef85e.webp" width="825" height="305" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="multi-workspace-setup">Multi-workspace Setup<a href="https://mikelikesrobots.github.io/blog/ros2-rust-node#multi-workspace-setup" class="hash-link" aria-label="Direct link to Multi-workspace Setup" title="Direct link to Multi-workspace Setup">​</a></h3>
<p>The ROS2 Rust workspace takes a considerable amount of time to build, and often gets built as part of the main workspace when it's not required, slowing down development. A different way of structuring workspaces is to separate the ROS2 Rust library from your application, as follows:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Create and build a workspace for ROS2 Rust</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p ~/ros2_rust_ws/src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/ros2_rust_ws/src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/ros2-rust/ros2_rust.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/ros2_rust_ws</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vcs import src &lt; src/ros2_rust/ros2_rust_humble.repos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">colcon build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source install/setup.bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check out application code into main workspace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/ros2_ws/src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/mikelikesrobots/aws-iot-node-rust.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/aws-samples/aws-iot-robot-connectivity-samples-ros2.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/ros2_ws</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">colcon build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source install/local_setup.bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This method means that the ROS2 Rust workspace only needs to be updated with new releases for ROS2 Rust, and otherwise can be left. Furthermore, you can source the setup script easily by adding a line to your <code>~/.bashrc</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo "source ~/ros2_rust_ws/install/setup.bash" &gt;&gt; ~/.bashrc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The downside of this method is that you can only source further workspaces using the <code>local_setup.bash</code> script, or it will overwrite the variables needed to access the ROS2 Rust libraries.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-example">Running the Example<a href="https://mikelikesrobots.github.io/blog/ros2-rust-node#running-the-example" class="hash-link" aria-label="Direct link to Running the Example" title="Direct link to Running the Example">​</a></h3>
<p>To run the example, you will need the <code>IOT_CONFIG_FILE</code> variable set from the Python repository.</p>
<p>Open two terminals. In each terminal, source the workspace, then run one of the two nodes as follows:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">source ~/ros2_ws/install/setup.bash  # Both terminals</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source ~/ros2_ws/install/local_setup.bash  # If using the multi-workspace setup method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 run aws_iot_node mqtt-telemetry --ros-args --param path_for_config:=$IOT_CONFIG_FILE  # One terminal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 run aws_iot_node mock-telemetry  # Other terminal</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Using a split terminal in <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">VSCode</a>, this looks like the following:</p>
<p><img loading="lazy" alt="Both MQTT and Mock nodes running" src="https://mikelikesrobots.github.io/assets/images/both-nodes-running-92dfaf608fc26b7e860deadf636f234a.webp" width="1080" height="332" class="img_ev3q"></p>
<p>You should now be able to see messages appearing in the <a href="https://us-west-2.console.aws.amazon.com/iot/home?region=us-west-2#/test" target="_blank" rel="noopener noreferrer">MQTT test client</a> in <a href="https://us-west-2.console.aws.amazon.com/iot/home" target="_blank" rel="noopener noreferrer">AWS IoT Core</a>. This will look like the following:</p>
<p><img loading="lazy" alt="MQTT Test Client" src="https://mikelikesrobots.github.io/assets/images/mqtt-test-client-b96ee0f56424ce8583de163e966316aa.webp" width="1080" height="572" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="https://mikelikesrobots.github.io/blog/ros2-rust-node#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>We've demonstrated that it's possible to build nodes in Rust just as with C++ and Python - although there's an extra step of setting up ROS2 Rust so our node can link to it. We can now build other nodes in Rust if we're on a resource constrained system, such as a Raspberry Pi or other small dev kit, and we want the guarantees from the Rust compiler that the C++ compiler doesn't have while being more secure and sustainable than a Python-based version.</p>
<p>Check out the repo and give it a try for yourself!</p>]]></content:encoded>
            <category>ros</category>
            <category>robotics</category>
            <category>aws</category>
            <category>iot</category>
        </item>
    </channel>
</rss>